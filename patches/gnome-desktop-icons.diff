From 0a0ed1f2fe8fca4f57054aa2748e123fc33f0cf0 Mon Sep 17 00:00:00 2001
From: piegames <git@piegames.de>
Date: Thu, 3 Mar 2022 22:31:24 +0100
Subject: [PATCH] wip2

---
 createThumbnail.js  | 2 +-
 desktopManager.js   | 2 +-
 desktopicons-neo.js | 2 +-
 extension.js        | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/createThumbnail.js b/createThumbnail.js
index 41d7bb7..174f539 100755
--- a/createThumbnail.js
+++ b/createThumbnail.js
@@ -1,4 +1,4 @@
-#!/usr/bin/gjs
+#!@gjs@/bin/gjs
 
 /* LICENSE INFORMATION
  * 
diff --git a/desktopManager.js b/desktopManager.js
index 7b1e648..7f63fd5 100644
--- a/desktopManager.js
+++ b/desktopManager.js
@@ -153,7 +153,7 @@ var DesktopManager = class {
 
         // Check if Nautilus is available
         try {
-            DesktopIconsUtil.trySpawn(null, ["nautilus", "--version"]);
+            DesktopIconsUtil.trySpawn(null, ["@nautilus@/bin/nautilus", "--version"]);
         } catch(e) {
             this._errorWindow = new ShowErrorPopup.ShowErrorPopup(_("Nautilus File Manager not found"),
                                                                   _("The Nautilus File Manager is mandatory to work with Desktop Icons: Neo."),
@@ -1429,7 +1429,7 @@ var DesktopManager = class {
         pathList = pathList.join("");
         uriList = uriList.join("");
         let deskTop = `'` + DesktopIconsUtil.getDesktopDir().get_uri() + `'`;
-        let execline = `/bin/bash -c "`;
+        let execline = `@bash@/bin/bash -c "`;
         execline += `NAUTILUS_SCRIPT_SELECTED_FILE_PATHS=${pathList} `;
         execline += `NAUTILUS_SCRIPT_SELECTED_URIS=${uriList} `;
         execline += `NAUTILUS_SCRIPT_CURRENT_URI=${deskTop} `;
diff --git a/desktopicons-neo.js b/desktopicons-neo.js
index b826db5..58ef182 100755
--- a/desktopicons-neo.js
+++ b/desktopicons-neo.js
@@ -1,4 +1,4 @@
-#!/usr/bin/env gjs
+#!@gjs@/bin/gjs
 
 /* LICENSE INFORMATION
  * 
diff --git a/extension.js b/extension.js
index cc8f296..a102808 100644
--- a/extension.js
+++ b/extension.js
@@ -226,7 +226,7 @@ function doKillAllOldDesktopProcesses() {
         }
         let path = 'gjs ' + GLib.build_filenamev([ExtensionUtils.getCurrentExtension().path, 'desktopicons-neo.js']);
         if (contents.startsWith(path)) {
-            let proc = new Gio.Subprocess({argv: ['/bin/kill', filename]});
+            let proc = new Gio.Subprocess({argv: ['@util-linux@/bin/kill', filename]});
             proc.init(null);
             proc.wait(null);
         }
-- 
2.33.1
